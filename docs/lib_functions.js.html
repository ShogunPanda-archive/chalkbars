<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lib/functions.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lib/functions.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
 * This file is part of the chalkbars node module. Copyright (C) 2015 and above Shogun &lt;shogun@cowtech.it>.
 * Licensed under the MIT license, which can be found at http://www.opensource.org/licenses/mit-license.php.
 */

(function(){
  "use strict";

  // --- Requires ---
  var chalk = require("chalk");
  var styles = require("./configuration").styles;

  // --- Exports ---
  module.exports = {
    parseStyles: function(raw){
      raw = raw ? raw.replace(/[^a-z0-9#_-]/ig, " ") : ""; // Replace other characters with a space

      // Replace with custom styles
      return raw.replace(/\S+/ig, function(style){
        return module.exports.manageStyle(style) || style;
      });
    },

    embedInColor: function(subject, color, type, background){
      var tags = background ? [48, 49] : [38, 39];
      return "\x1b[" + tags[0] + ";" + type + ";" + color + "m" + subject + "\x1b[" + tags[1] + "m";
    },

    embedIn256Color: function(subject, r, g, b, background){
      r = parseInt(r, 10) || 0;
      g = parseInt(g, 10) || 0;
      b = parseInt(b, 10) || 0;

      return module.exports.embedInColor(subject, 16 + (r * 36) + (g * 6) + b, 5, background); // eslint-disable-line no-extra-parens
    },

    embedInHexColor: function(subject, color, background){
      var r = parseInt(color.substring(0, 2), 16) || 0;
      var g = parseInt(color.substring(2, 4), 16) || 0;
      var b = parseInt(color.substring(4, 6), 16) || 0;

      return module.exports.embedInColor(subject, r + ";" + g + ";" + b, 2, background);
    },

    /**
     * Get or sets a chalkbars style.
     *
     * @alias module:chalkbars.style
     * @param {string} name - The name of the style. It **must not** overwrite a existing chalk style.
     * @param {string|null|undefined} [value] -
     * * When omitted, it returns the current value of the style.
     * * When `null`, it returns the current value of the style and then deletes the style.
     * * When a string, it sets the new value of the style and then returns the value itself.
     *
     * @returns {string|undefined} The value of the style or `undefined`.
     */
    manageStyle: function(name, value){
      if(value === "")
        value = null;

      switch(typeof value){
        case "undefined": // Search the style
          value = styles[name];
          break;
        case "string": // Define a new style
          if(typeof chalk[name] === "function")
            throw new RangeError("Cannot use \"" + name + "\" as a custom style name as it would shadow a chalk style.");

          // Verify that the value does not contain other styles
          value = value.replace(/[^a-z0-9#_-]/ig, " ");

          value.split(/\s+/).forEach(function(style){
            if(module.exports.manageStyle(style))
              throw new RangeError("Nesting of custom styles is not supported.");
          });

          styles[name] = value;
          break;
        default:
          // Null is handled here because typeof null == "object" -
          // If this if evaluates to true, then some truthy value different than a string was passed and this is not allow.
          // If this if evaluates to false, then all falsey values will result in deleting the style.
          if(value)
            throw new TypeError("Only strings are supported a values for styles.");

          // Delete a style. Return the current style as return value
          value = styles[name];
          delete styles[name];
          break;
      }

      return value;
    }
  };
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="chalkbars.module_configuration.html">configuration</a></li><li><a href="module-chalkbars.html">chalkbars</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-beta2</a> on Sat Mar 14 2015 14:21:06 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
